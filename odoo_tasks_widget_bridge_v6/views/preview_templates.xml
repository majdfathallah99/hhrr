<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="preview_template" name="Task Widget Preview">
    <t t-call="web.html_container">
      <div class="o_form_view o_xxl">
        <h2>Task Widget Preview</h2>
        <p class="text-muted">Signed in as <t t-esc="user.display_name"/> â€” showing your open tasks by deadline.</p>
        <table class="o_list_view table table-sm table-hover">
          <thead>
            <tr>
              <th>#</th>
              <th>Task</th>
              <th>Project</th>
              <th>Stage</th>
              <th>Deadline</th>
              <th>Status</th>
              <th>Priority</th>
            </tr>
          </thead>
          <tbody>
            <t t-foreach="tasks" t-as="r" t-key="id">
              <tr>
                <td><t t-esc="r['id']"/></td>
                <td><t t-esc="r['name']"/></td>
                <td><t t-esc="r['project']"/></td>
                <td><t t-esc="r['stage']"/></td>
                <td>
                  <t t-esc="r['deadline'] or '-'"/>
                  <t t-if="r['overdue']">
                    <span class="badge rounded-pill text-bg-danger">Overdue</span>
                  </t>
                </td>
                <td>
                  <t t-if="r['kanban_state']=='done'">Done</t>
                  <t t-elif="r['kanban_state']=='blocked'">Blocked</t>
                  <t t-else="">Normal</t>
                </td>
                <td><t t-esc="r['priority']"/></td>
              </tr>
            </t>
          </tbody>
        </table>
      </div>
    </t>
  </template>
</odoo>